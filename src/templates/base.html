{# Provide some common macros #}

{% macro heading(text, link=True, link_to=None, show_icon=True, sublevel=0) %}
{# sublevel=0 for an ordinary header, 1 for a sub-heading, 2 for a sub-sub-heading, etc #}
<h{{ sublevel+1 }} class="anchored-header" id="{{ text|into_tag }}">
{% if link %}<a href="{{ "#" + text|into_tag if link_to == None else link_to }}">{% endif %}
		{% if link and show_icon %}<span class="fa fa-paragraph" title="Permalink to this headline"></span>{% endif %}
		<span class="header-text">{{ text }}</span>
		{% if link %}</a>{% endif %}
</h{{ sublevel+1 }}>
{% endmacro %}

{% macro show_image(image) %}
{# Used to show an image in the center of the screen.
   This also configures the link to a full-screen version #}

<a href="{{ image.path|to_rel_path }}">
		<img src="{{ image.path|to_rel_path }}" width="{{ image.size.0 }}px" height="{{ image.size.1 }}px" class="theater-image"/>
</a>
{% endmacro %}

{% macro offsite_link(path, label="", class="") %}
{# Use whenever linking to an off-site resource.
   This was we can indicate it's off-site (with an icon, etc), etc #}
<a class="{{ class }}" href="{{ path }}">{{ label }}</a>{% endmacro %}

{% macro mailto_link(address, label="", class="", subject="", body="") %}
{{ offsite_link(path=("mailto::" + address)|url_with_args(**dict(subject=subject, body=body)|drop_null_values), label=label, class=class) }}{% endmacro %}

{# Note: the below needs to be all on one line so its use within a P tag won't cause formatting issues #}
{# see the (last revised XXX) line in blog_entry.html as example #}
{% macro show_date(date) %}<span title="{{ date|detailed_date }}">{{ date|friendly_date }}</span>{% endmacro %}

{% macro inline_code(code) %}
<code class="inline-code">{{ code }}</code>
{% endmacro %}

{% macro multiline_code(code) %}
<code class="multiline-code">{{ code }}</code>
{% endmacro %}

{% if not query_type %}
<!DOCTYPE html>
<html>
		<head>
			<meta charset="utf-8">
			<meta name="viewport" content="width=device-width initial-scale=1" />
			<meta name="description" content="Weblog/homepage for an artist/developer/engineer. DIY build logs, opinions and artwork" />
			<link rel="stylesheet" href="{{ resources["css/global.css"].path|to_rel_path }}">
			<link rel="stylesheet" href="{{ "res/font-awesome/css/font-awesome.min.css"|to_rel_path }}">
			<title>{% block title %}{{ page.title }}{% endblock %}</title>
		</head>
		<body>
			<header class="nav-header">
					{# Derivative templates are expected to
						{% set is_page_xxx = True %} for at least one page #}
					<ul class="nav-ul">
							<li class="nav-li-blog{{ " active" if page.__class__ == HomePage else ""}}">
									<a href="{{ pages["/"].path|to_rel_path }}">Blog</a>
							</li>
							<li class="filler">
							</li>
							<li class="nav-li-about{{ " active" if page.__class__ == AboutPage else "" }}">
									<a href="{{ pages["about"].path|to_rel_path }}">About</a>
							</li>
					</ul>
			</header>
			<div class="page-content">
					{% block page_content %}{% endblock %}
			</div>
			<footer class="glob-footer">
					<div class="footer-social">
							{{ mailto_link(social.contact_email, class="email fa fa-envelope") }}
							{{ offsite_link(social.github_url, class="github fa fa-github") }}
							{{ offsite_link(social.twitter_url, class="twitter fa fa-twitter") }}
					</div>
					<p class="footer-legal">
							Unless otherwise stated, all code snippets, artwork or writings hosted on this website are released into the public domain.
							<a href="{{ pages["about"].path|to_rel_path}}#{{ "License / Attributions"|into_tag }}">More info</a>.
					</p>
			</footer>
		</body>
</html>
{% endif %}

